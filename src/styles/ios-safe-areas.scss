/**
 * iOS Safe Area Insets
 * Handles notch, Dynamic Island, and home indicator on iPhones
 */

/* Support for CSS environment variables */
:root {
  /* Set fallback values for safe area insets */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
}

/* iOS-specific body adjustments */
@supports (-webkit-touch-callout: none) {
  /* iOS-only styles */
  body {
    /* Prevent content from going under notch or home indicator */
    padding-top: constant(safe-area-inset-top);
    padding-top: env(safe-area-inset-top);
    padding-bottom: constant(safe-area-inset-bottom);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: constant(safe-area-inset-left);
    padding-left: env(safe-area-inset-left);
    padding-right: constant(safe-area-inset-right);
    padding-right: env(safe-area-inset-right);
  }
}

/* Fix for fixed/sticky positioned elements on iOS */
.ios-safe-area-top {
  padding-top: constant(safe-area-inset-top);
  padding-top: env(safe-area-inset-top);
}

.ios-safe-area-bottom {
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}

.ios-safe-area-left {
  padding-left: constant(safe-area-inset-left);
  padding-left: env(safe-area-inset-left);
}

.ios-safe-area-right {
  padding-right: constant(safe-area-inset-right);
  padding-right: env(safe-area-inset-right);
}

/* Utility classes for margin-based safe areas */
.ios-safe-margin-top {
  margin-top: constant(safe-area-inset-top);
  margin-top: env(safe-area-inset-top);
}

.ios-safe-margin-bottom {
  margin-bottom: constant(safe-area-inset-bottom);
  margin-bottom: env(safe-area-inset-bottom);
}

/* Height utilities that respect safe areas */
.full-height-safe {
  height: 100vh;
  height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
}

.min-full-height-safe {
  min-height: 100vh;
  min-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
}

/* Use dvh (dynamic viewport height) for better mobile support */
@supports (height: 100dvh) {
  .full-height-safe {
    height: 100dvh;
  }

  .min-full-height-safe {
    min-height: 100dvh;
  }
}
